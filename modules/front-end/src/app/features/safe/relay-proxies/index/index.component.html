<section class="body-container">
  <div class="table-content-area">
    <div class="table-search-area">
      <div class="search-inputs">
        <nz-input-group class="query" [nzPrefix]="prefixIconSearch">
          <input nz-input type="text" placeholder="Filter by property" i18n-placeholder="@@users.idx.filter-by-property" [(ngModel)]="filter.searchText" (ngModelChange)="onSearch(true)">
        </nz-input-group>
        <ng-template #prefixIconSearch>
          <i nz-icon nzType="icons:icon-search"></i>
        </ng-template>

      </div>
      <button nz-button nzType="primary" (click)="onCreateOrEditProxy()">
        <i nz-icon nzType="icons:icon-add"></i>
        <ng-container i18n="@@iam.team.idx.add">Add</ng-container>
      </button>
    </div>
    <div class="table-wrapper">
      <nz-table #basicTable nzSize="small"
        nzShowSizeChanger
        [nzData]="list"
        [nzFrontPagination]="false"
        [nzLoading]="isLoading"
        [nzTotal]="totalCount"
        [(nzPageSize)]="filter.pageSize"
        (nzPageSizeChange)="onSearch()"
        [nzPageSizeOptions]="[10,20,30]"
        (nzPageIndexChange)="onSearch()"
        [(nzPageIndex)]="filter.pageIndex">
        <thead>
            <tr>
              <th>name</th>
              <th>keyId</th>
              <th *ngFor="let prop of extraColumns">{{prop}}</th>
              <th i18n="@@common.actions">Actions</th>
            </tr>
        </thead>
        <tbody style="width: calc(100% - 200px);">
          <ng-container *ngFor="let user of basicTable.data">
            <tr>
              <td (click)="navigateToUserDetail(user)">
                <span>{{ user.name }}</span>
              </td>
              <td>{{ user.keyId }}</td>
              <td *ngFor="let prop of extraColumns">{{getCustomizePropertyValue(user, prop)}}</td>
              <td>
                <a class="primary-link-btn" (click)="onSegmentsAndFlagsClick(user)" i18n="@@users.idx.ff-segments">Evaluate on flags and segments</a>
                <nz-divider nzType="vertical"></nz-divider>
                <a class="primary-link-btn" nz-button nzType="link" (click)="navigateToUserDetail(user)" i18n="@@common.details">Details</a>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </nz-table>
    </div>
  </div>
</section>
<relay-proxy-drawer [visible]="proxyDetailvisible" [envId]="currentEnvId" (close)="onPropsSettingClose()"></relay-proxy-drawer>
<user-segments-flags-drawer [visible]="segmentsAndFlagsVisible" [user]="currentUser" (close)="onSegmentsAndFlagsClose()"></user-segments-flags-drawer>
