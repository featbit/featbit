<section class="body-container">
  <div class="table-content-area">
    <div class="table-search-area">
      <div class="search-inputs">
        <nz-input-group class="query" [nzPrefix]="prefixIconSearch">
          <input nz-input type="text" placeholder="Filter by name" i18n-placeholder="@@common.searchNamePlaceholder" [(ngModel)]="filter.name" (ngModelChange)="doSearch(true)">
        </nz-input-group>
        <ng-template #prefixIconSearch>
          <i nz-icon nzType="icons:icon-search"></i>
        </ng-template>
      </div>
      <button nz-button nzType="primary" (click)="createOrEdit()">
        <i nz-icon nzType="icons:icon-add"></i>
        <ng-container i18n="@@common.add">Add</ng-container>
      </button>
    </div>
    <div class="table-wrapper">
      <nz-table #basicTable nzSize="small"
        nzShowSizeChanger
        [nzData]="relayProxies.items"
        [nzFrontPagination]="false"
        [nzLoading]="isLoading"
        [nzTotal]="relayProxies.totalCount"
        [(nzPageSize)]="filter.pageSize"
        (nzPageSizeChange)="doSearch()"
        [nzPageSizeOptions]="[10,20,30]"
        (nzPageIndexChange)="doSearch()"
        [(nzPageIndex)]="filter.pageIndex">
        <thead>
            <tr>
              <th nzWidth="30%" i18n="@@common.name">Name</th>
              <th nzWidth="25%">Key</th>
              <th nzWidth="15%" i18n="@@common.status">Status</th>
              <th nzWidth="10%" nzAlign="center" i18n="@@common.sync">Sync</th>
              <th i18n="@@common.actions">Actions</th>
            </tr>
        </thead>
        <tbody style="width: calc(100% - 200px);">
          <ng-container *ngFor="let item of basicTable.data">
            <tr>
              <td (click)="createOrEdit(item)">
                {{ item.name }}
              </td>
              <td>{{item.key}}</td>
              <td></td>
              <td style="text-align: center">
                <button nz-button nzSize="small" nzType="link" (click)="syncAgents(item)">
                  <i nz-icon [nzType]="'sync'"></i>
                </button>
              </td>
              <td>
                <a style="color: #23AD7F" (click)="createOrEdit(item)" i18n="@@common.edit">Edit</a>
                <nz-divider nzType="vertical"></nz-divider>
                <a
                  style="color: #717D8A"
                  i18n-nz-popconfirm="@@common.remove-confirm" nz-popconfirm="This operation cannot be reverted, are you sure to remove it?"
                  nzPopconfirmPlacement="bottomRight"
                  [nzPopconfirmOverlayStyle]="{minWidth: '240px'}"
                  (nzOnConfirm)="delete(item)" [nzIcon]="iconTplDelete">
                  <ng-container i18n="@@common.remove">Remove</ng-container>
                </a>
                <ng-template #iconTplDelete>
                  <i nz-icon nzType="question-circle" nzTheme="fill"></i>
                </ng-template>
              </td>
            </tr>
          </ng-container>
        </tbody>
      </nz-table>
    </div>
  </div>
</section>
<relay-proxy-drawer [visible]="proxyDetailvisible" (close)="relayProxyDrawerClosed($event)" [relayProxy]="currentRelayProxy"></relay-proxy-drawer>
